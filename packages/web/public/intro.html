<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SurvivalPlot ‚Äî Guide to Kaplan-Meier Survival Analysis</title>
<style>
  :root {
    --bg: #ffffff;
    --bg-alt: #f6f8fa;
    --text: #1a1a2e;
    --text-muted: #555;
    --border: #d0d7de;
    --accent: #2563eb;
    --accent-light: #dbeafe;
    --code-bg: #f0f4f8;
    --heading: #0f172a;
    --eq-bg: #f8fafc;
  }
  [data-theme="dark"] {
    --bg: #0d1117;
    --bg-alt: #161b22;
    --text: #e6edf3;
    --text-muted: #8b949e;
    --border: #30363d;
    --accent: #58a6ff;
    --accent-light: #1a2332;
    --code-bg: #1c2128;
    --heading: #f0f6fc;
    --eq-bg: #161b22;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.7;
  }
  .container {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 1.5rem 4rem;
  }
  nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--border);
    margin-bottom: 2rem;
  }
  nav a {
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
  }
  nav a:hover { text-decoration: underline; }
  #theme-toggle {
    background: none;
    border: 1px solid var(--border);
    color: var(--text);
    padding: 0.3rem 0.7rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
  }
  .hero {
    text-align: center;
    padding: 2.5rem 0 2rem;
  }
  .hero h1 {
    font-size: 2.4rem;
    color: var(--heading);
    margin-bottom: 0.3rem;
  }
  .hero h1 span { color: var(--accent); }
  .hero p {
    font-size: 1.15rem;
    color: var(--text-muted);
  }
  h2 {
    font-size: 1.5rem;
    color: var(--heading);
    margin: 2.5rem 0 0.75rem;
    padding-bottom: 0.4rem;
    border-bottom: 2px solid var(--accent);
  }
  h3 {
    font-size: 1.15rem;
    color: var(--heading);
    margin: 1.5rem 0 0.5rem;
  }
  p { margin: 0.6rem 0; }
  ul, ol { margin: 0.5rem 0 0.5rem 1.5rem; }
  li { margin: 0.3rem 0; }
  .eq {
    background: var(--eq-bg);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.8rem 1.2rem;
    margin: 1rem 0;
    font-family: "Courier New", Courier, monospace;
    font-size: 1rem;
    overflow-x: auto;
    text-align: center;
  }
  code {
    background: var(--code-bg);
    padding: 0.15rem 0.4rem;
    border-radius: 4px;
    font-size: 0.9em;
  }
  .callout {
    background: var(--accent-light);
    border-left: 4px solid var(--accent);
    padding: 0.8rem 1rem;
    border-radius: 0 6px 6px 0;
    margin: 1rem 0;
  }
  .callout strong { color: var(--accent); }
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
    font-size: 0.95rem;
  }
  th, td {
    border: 1px solid var(--border);
    padding: 0.5rem 0.75rem;
    text-align: left;
  }
  th {
    background: var(--bg-alt);
    font-weight: 600;
  }
  .glossary dt {
    font-weight: 600;
    color: var(--heading);
    margin-top: 0.7rem;
  }
  .glossary dd {
    margin-left: 1rem;
    color: var(--text-muted);
    margin-bottom: 0.3rem;
  }
  .steps {
    counter-reset: step;
    list-style: none;
    margin-left: 0;
  }
  .steps li {
    counter-increment: step;
    position: relative;
    padding-left: 2.5rem;
    margin: 0.7rem 0;
  }
  .steps li::before {
    content: counter(step);
    position: absolute;
    left: 0;
    width: 1.8rem;
    height: 1.8rem;
    background: var(--accent);
    color: #fff;
    border-radius: 50%;
    text-align: center;
    line-height: 1.8rem;
    font-weight: 700;
    font-size: 0.85rem;
  }
  .ref {
    font-size: 0.9rem;
    color: var(--text-muted);
  }
  footer {
    text-align: center;
    padding: 2rem 0 1rem;
    color: var(--text-muted);
    font-size: 0.85rem;
    border-top: 1px solid var(--border);
    margin-top: 3rem;
  }
  @media (max-width: 600px) {
    .container { padding: 1rem; }
    .hero h1 { font-size: 1.8rem; }
  }
</style>
</head>
<body>
<div class="container">

<nav>
  <a href="/">‚Üê Back to SurvivalPlot</a>
  <button id="theme-toggle">üåô Dark</button>
</nav>

<!-- Hero -->
<div class="hero">
  <h1><span>Survival</span>Plot</h1>
  <p>Free, browser-based Kaplan-Meier survival analysis</p>
</div>

<!-- 1. What is Survival Analysis? -->
<h2>1. What is Survival Analysis?</h2>
<p>
  Survival analysis is a branch of statistics for studying <strong>time-to-event</strong> data ‚Äî how long until something happens. The "event" could be death in a clinical trial, failure of a machine component, customer churn, or relapse of a disease.
</p>
<p>
  Unlike ordinary statistics, survival analysis handles a unique challenge: <strong>incomplete observations</strong>. Not every subject reaches the event during the study. A patient may still be alive when the trial ends, or a customer may still be subscribed when you pull the data. These incomplete observations carry real information and discarding them would bias results.
</p>
<p>
  Common applications include:
</p>
<ul>
  <li><strong>Clinical trials</strong> ‚Äî comparing overall survival between drug vs. placebo</li>
  <li><strong>Engineering reliability</strong> ‚Äî estimating time to failure for components</li>
  <li><strong>Epidemiology</strong> ‚Äî disease-free survival after treatment</li>
  <li><strong>Business analytics</strong> ‚Äî customer lifetime and churn prediction</li>
</ul>

<!-- 2. Censoring -->
<h2>2. Censoring</h2>
<p>
  <strong>Right censoring</strong> occurs when a subject's event time is unknown because observation ended before the event happened. This is the most common type in practice.
</p>
<p>Subjects can be censored for many reasons:</p>
<ul>
  <li>The study ends before the event occurs (administrative censoring)</li>
  <li>The patient is lost to follow-up (moves away, withdraws consent)</li>
  <li>The patient dies from an unrelated cause (competing risk)</li>
</ul>
<div class="callout">
  <strong>Key insight:</strong> A censored observation at time <em>t</em> tells us the true event time is <em>at least t</em>. The Kaplan-Meier estimator uses this information by keeping censored subjects in the "at risk" count until they drop out.
</div>
<p>
  In SurvivalPlot, censored observations are coded with <code>Event = 0</code> and displayed as small tick marks (+) on the survival curve.
</p>

<!-- 3. The Kaplan-Meier Estimator -->
<h2>3. The Kaplan-Meier Estimator</h2>
<p>
  The <strong>Kaplan-Meier (KM) estimator</strong>, also called the <em>product-limit estimator</em>, is the standard nonparametric method for estimating the survival function from time-to-event data.
</p>
<h3>The Formula</h3>
<div class="eq">
  S(t) = ‚àè<sub>t<sub>i</sub> ‚â§ t</sub> (1 ‚àí d<sub>i</sub> / n<sub>i</sub>)
</div>
<p>Where at each event time <em>t<sub>i</sub></em>:</p>
<ul>
  <li><strong>d<sub>i</sub></strong> = number of events (e.g., deaths) at time <em>t<sub>i</sub></em></li>
  <li><strong>n<sub>i</sub></strong> = number of subjects at risk just before <em>t<sub>i</sub></em></li>
</ul>

<h3>Intuitive Explanation</h3>
<p>
  At each event time, we calculate the <strong>conditional probability of surviving</strong> past that moment: <code>(n ‚àí d) / n</code>. The cumulative survival probability is the running product of all these conditional probabilities.
</p>
<p>
  The result is a <strong>step function</strong> that starts at 1.0 (everyone alive) and drops at each event time. Between events, the curve is flat ‚Äî no information changes. Censored observations don't cause a drop but do reduce the at-risk count for subsequent times.
</p>

<h3>Worked Example</h3>
<table>
  <thead>
    <tr><th>Time</th><th>At Risk (n)</th><th>Events (d)</th><th>Censored</th><th>S(t)</th></tr>
  </thead>
  <tbody>
    <tr><td>0</td><td>10</td><td>0</td><td>0</td><td>1.000</td></tr>
    <tr><td>3</td><td>10</td><td>1</td><td>0</td><td>0.900</td></tr>
    <tr><td>5</td><td>9</td><td>0</td><td>1</td><td>0.900</td></tr>
    <tr><td>8</td><td>8</td><td>2</td><td>0</td><td>0.675</td></tr>
    <tr><td>12</td><td>6</td><td>1</td><td>0</td><td>0.563</td></tr>
  </tbody>
</table>
<p>At time 8: S(8) = 0.900 √ó (1 ‚àí 2/8) = 0.900 √ó 0.75 = 0.675</p>

<!-- 4. Confidence Intervals -->
<h2>4. Confidence Intervals</h2>
<p>
  The KM curve is an estimate ‚Äî it has uncertainty. <strong>Greenwood's formula</strong> gives the variance of the survival estimate at each time point:
</p>
<div class="eq">
  Var(S(t)) = S(t)¬≤ √ó ‚àë<sub>t<sub>i</sub> ‚â§ t</sub> d<sub>i</sub> / (n<sub>i</sub> √ó (n<sub>i</sub> ‚àí d<sub>i</sub>))
</div>
<p>The 95% confidence interval is then:</p>
<div class="eq">
  S(t) ¬± 1.96 √ó ‚àöVar(S(t))
</div>
<p>
  CI bands are displayed as shaded regions around the KM curve. They widen over time as fewer subjects remain and uncertainty grows. The bounds are clamped to [0, 1] since probabilities cannot exceed these limits.
</p>
<div class="callout">
  <strong>Clinical relevance:</strong> Overlapping CI bands between two groups suggest the difference may not be statistically significant. However, the formal test is the log-rank test (Section 5).
</div>

<!-- 5. Comparing Groups -->
<h2>5. Comparing Groups: The Log-Rank Test</h2>
<p>
  The <strong>log-rank test</strong> (Mantel-Cox test) is the standard method for comparing survival curves between two or more groups. It tests the null hypothesis that survival is identical across groups.
</p>
<h3>How It Works</h3>
<p>At each event time across all groups combined, the test compares:</p>
<ul>
  <li><strong>Observed events (O)</strong> ‚Äî actual events in each group</li>
  <li><strong>Expected events (E)</strong> ‚Äî events expected if groups had equal survival, proportional to group size</li>
</ul>
<div class="eq">
  E<sub>group</sub> = (n<sub>group</sub> / n<sub>total</sub>) √ó d<sub>total</sub>
</div>
<p>The chi-square test statistic is:</p>
<div class="eq">
  œá¬≤ = ‚àë (O ‚àí E)¬≤ / E &nbsp;&nbsp;&nbsp; (df = groups ‚àí 1)
</div>
<h3>Interpreting the p-value</h3>
<ul>
  <li><strong>p &lt; 0.05</strong> ‚Äî statistically significant difference in survival between groups</li>
  <li><strong>p ‚â• 0.05</strong> ‚Äî no significant difference detected (does not prove equality)</li>
</ul>
<p>
  The log-rank test has maximum power when the <strong>hazard ratio is constant over time</strong> (proportional hazards assumption). If survival curves cross, consider the Wilcoxon (Breslow) test instead.
</p>

<!-- 6. Median Survival -->
<h2>6. Median Survival</h2>
<p>
  The <strong>median survival time</strong> is the time <em>t</em> at which the survival function first reaches or crosses 0.5:
</p>
<div class="eq">
  Median = min{ t : S(t) ‚â§ 0.5 }
</div>
<p>
  This is the single most commonly reported summary statistic in clinical trials. It answers: <em>"Half the patients survived at least this long."</em>
</p>
<p>
  If the survival curve never drops below 0.5 (not enough events observed), the median is undefined ‚Äî reported as "not reached" (NR). This is actually good news: it means more than half the subjects are still event-free.
</p>
<div class="callout">
  <strong>Example:</strong> "Median overall survival was 14.2 months in the treatment arm vs. 9.7 months in the control arm (log-rank p = 0.003)." This is the standard way results are reported in oncology trials.
</div>

<!-- 7. Number-at-Risk Table -->
<h2>7. Number-at-Risk Table</h2>
<p>
  Most medical journals require a <strong>number-at-risk table</strong> below the KM plot. This table shows how many subjects remain under observation at regular time intervals.
</p>
<table>
  <thead>
    <tr><th>Group</th><th>0 mo</th><th>6 mo</th><th>12 mo</th><th>18 mo</th><th>24 mo</th></tr>
  </thead>
  <tbody>
    <tr><td>Treatment</td><td>50</td><td>42</td><td>31</td><td>18</td><td>7</td></tr>
    <tr><td>Control</td><td>50</td><td>35</td><td>22</td><td>10</td><td>3</td></tr>
  </tbody>
</table>
<p>How to read it:</p>
<ul>
  <li>Numbers decrease over time due to events <em>and</em> censoring</li>
  <li>A rapid decline suggests high event rates or heavy censoring</li>
  <li>Very small at-risk numbers mean the curve tail is unreliable ‚Äî CIs will be wide</li>
</ul>
<p>
  SurvivalPlot automatically generates the at-risk table at evenly spaced intervals below the KM chart.
</p>

<!-- 8. How to Use SurvivalPlot -->
<h2>8. How to Use SurvivalPlot</h2>
<ol class="steps">
  <li><strong>Prepare your data</strong> as a table with three columns: <code>Time</code>, <code>Event</code> (1 = event, 0 = censored), and <code>Group</code> (e.g., Treatment / Control).</li>
  <li><strong>Paste data</strong> into the text area. Tab-separated or CSV format. Include a header row.</li>
  <li><strong>Click Analyze</strong> to generate Kaplan-Meier curves, confidence intervals, at-risk table, and log-rank test results.</li>
  <li><strong>Review results</strong> in the Results panel: median survival, event counts, and log-rank p-value.</li>
  <li><strong>Inspect the plot</strong> ‚Äî survival curves with CI bands and censoring tick marks.</li>
  <li><strong>Export</strong> the chart as PNG/SVG for publication, or copy results for your report.</li>
</ol>

<!-- 9. Glossary -->
<h2>9. Glossary</h2>
<dl class="glossary">
  <dt>Survival Function S(t)</dt>
  <dd>The probability that the event has not yet occurred by time <em>t</em>. Starts at 1, decreases over time.</dd>

  <dt>Hazard Function h(t)</dt>
  <dd>The instantaneous rate of the event occurring at time <em>t</em>, given survival to that point. Related to survival by S(t) = exp(‚àí‚à´h(u)du).</dd>

  <dt>Censoring</dt>
  <dd>An incomplete observation where the event was not observed. Right censoring means the true event time is greater than the observed time.</dd>

  <dt>Kaplan-Meier Estimator</dt>
  <dd>A nonparametric estimator of the survival function using the product-limit method. Does not assume any distribution for event times.</dd>

  <dt>Product-Limit Method</dt>
  <dd>The technique of multiplying conditional survival probabilities at each event time to obtain cumulative survival.</dd>

  <dt>Log-Rank Test</dt>
  <dd>A chi-square test comparing observed vs. expected events across groups to determine if survival differs significantly.</dd>

  <dt>Greenwood's Formula</dt>
  <dd>The standard variance estimator for the KM survival function, used to construct confidence intervals.</dd>

  <dt>Median Survival</dt>
  <dd>The time at which the survival probability equals 0.5. Undefined ("not reached") if S(t) never drops below 0.5.</dd>

  <dt>Number at Risk</dt>
  <dd>The count of subjects still being observed (not yet experienced the event or been censored) at a given time point.</dd>

  <dt>Hazard Ratio (HR)</dt>
  <dd>The ratio of hazard rates between two groups. HR &lt; 1 means the treatment group has lower risk; HR &gt; 1 means higher risk.</dd>

  <dt>Proportional Hazards</dt>
  <dd>The assumption that the hazard ratio between groups is constant over time. Required for the log-rank test to have optimal power.</dd>

  <dt>Confidence Interval (CI)</dt>
  <dd>A range of values (typically 95%) within which the true survival probability is expected to fall.</dd>
</dl>

<!-- 10. References -->
<h2>10. References</h2>
<ul class="ref">
  <li>Bland JM, Altman DG. "Survival probabilities (the Kaplan-Meier method)." <em>BMJ</em>. 1998;317(7172):1572‚Äì1580.</li>
  <li>Bland JM, Altman DG. "The logrank test." <em>BMJ</em>. 2004;328(7447):1073.</li>
  <li>Kaplan EL, Meier P. "Nonparametric estimation from incomplete observations." <em>J Am Stat Assoc</em>. 1958;53(282):457‚Äì481.</li>
  <li>Collett D. <em>Modelling Survival Data in Medical Research</em>. 3rd ed. Chapman &amp; Hall/CRC; 2015.</li>
  <li>Clark TG, Bradburn MJ, Love SB, Altman DG. "Survival analysis part I: basic concepts and first analyses." <em>Br J Cancer</em>. 2003;89(2):232‚Äì238.</li>
  <li>Rich JT et al. "A practical guide to understanding Kaplan-Meier curves." <em>Otolaryngol Head Neck Surg</em>. 2010;143(3):331‚Äì336.</li>
  <li>Greenwood M. <em>Reports on Public Health and Medical Subjects</em>. No. 33. HMSO; 1926.</li>
</ul>

<footer>
  SurvivalPlot ‚Äî Free, open-source Kaplan-Meier survival analysis.<br />
  No data leaves your browser.
</footer>

</div>

<script>
  const btn = document.getElementById('theme-toggle');
  let theme = 'light';
  btn.addEventListener('click', () => {
    theme = theme === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', theme);
    btn.textContent = theme === 'light' ? 'üåô Dark' : '‚òÄÔ∏è Light';
  });
</script>
</body>
</html>
